<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Оплата по QR-коду — Адвокат Медного Гроша</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700&family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <nav class="main-nav">
        <div class="nav-container">
            <div class="nav-logo">
                <i class="fas fa-balance-scale"></i>
                <span class="logo-full">Адвокат Медного Гроша</span>
                <span class="logo-short">АМГ</span>
            </div>
            <div class="nav-links">
                <a href="index.html#features">Работа</a>
                <a href="index.html#pricing">Тарифы</a>
                <a href="index.html#start" class="nav-button">Главная</a>
            </div>
        </div>
    </nav>

    <div class="payment-container">
        <!-- Шаги -->
        <div class="payment-steps">
            <h2><i class="fas fa-shoe-prints"></i> 3 шага для оплаты</h2>
            <div class="steps-grid">
                <div class="step">
                    <div class="step-icon">1</div>
                    <h4>Наведите камеру</h4>
                    <p>Наведите камеру вашего телефона на QR-код. Он автоматически откроет приложение банка.</p>
                </div>
                <div class="step">
                    <div class="step-icon">2</div>
                    <h4>Проверьте и оплатите</h4>
                    <p>В приложении проверьте сумму (она заполнится автоматически) и назначение платежа.</p>
                </div>
                <div class="step">
                    <div class="step-icon">3</div>
                    <h4>Отправьте чек</h4>
                    <p>После оплаты <strong>сделайте скриншот чека</strong> и отправьте его в <a href="https://t.me/chearu-stack" target="_blank">Telegram</a>.</p>
                </div>
            </div>
        </div>

        <!-- Основной QR-блок -->
        <div class="qr-main-section">
            <div class="qr-info">
                <h3><i class="fas fa-qrcode"></i> Оплата по QR-коду</h3>
                <p class="qr-description">Это самый быстрый и безопасный способ. Банковское приложение автоматически подставит все нужные реквизиты.</p>
                
                <div class="qr-amount-info">
                    <div class="selected-plan">
                        <h4>Вы оплачиваете:</h4>
                        <div class="plan-details">
                            <div class="plan-name" id="selectedPlanName">Расширенный пакет помощи</div>
                            <div class="plan-price" id="selectedPlanPrice">1 200 ₽</div>
                            <div class="plan-desc" id="selectedPlanDesc">Расчёт неустойки + 3 шаблона документов + жалоба в Роспотребнадзор</div>
                        </div>
                    </div>
                    
                    <div class="amount-instruction">
                        <p><i class="fas fa-check-circle"></i> <strong>Сумма уже указана в QR-коде</strong></p>
                        <p><i class="fas fa-check-circle"></i> Назначение: <strong>«Оплата консультации по защите прав потребителей»</strong></p>
                        <p><i class="fas fa-check-circle"></i> После оплаты <strong>сохраните чек</strong> и отправьте его нам</p>
                    </div>
                </div>
            </div>
            
            <div class="qr-code-wrapper">
                <div class="qr-code-container">
                    <!-- QR-код будет подставлен скриптом -->
                    <img src="" 
                         alt="QR-код для оплаты" 
                         class="qr-code-image" id="qrCodeImage">
                    <p class="qr-hint"><i class="fas fa-mobile-alt"></i> Наведите камеру телефона</p>
                </div>
            </div>
        </div>

        <!-- Что делать, если QR не работает -->
        <div class="qr-fallback">
            <h4><i class="fas fa-question-circle"></i> Если QR-код не срабатывает</h4>
            <p>Напишите нам в <a href="https://t.me/chearu-stack" target="_blank">Telegram</a>, и мы моментально вышлем вам:</p>
            <ul>
                <li><strong>Персональную ссылку для оплаты</strong> (откроется в вашем банке)</li>
                <li><strong>Короткие реквизиты</strong> (только счёт и БИК)</li>
                <li><strong>Инструкцию</strong> для вашего конкретного банка</li>
            </ul>
            <p class="fallback-note">Мы не публикуем полные реквизиты в открытом доступе — это защищает вас от ошибок при заполнении.</p>
        </div>

        <!-- Что будет после оплаты -->
        <div class="payment-after">
            <h4><i class="fas fa-gift"></i> Что вы получите сразу после оплаты</h4>
            <div class="benefits-grid">
                <div class="benefit">
                    <i class="fas fa-file-contract"></i>
                    <p><strong>Доступ к документам</strong><br>Шаблоны претензий, расчёты, инструкции</p>
                </div>
                <div class="benefit">
                    <i class="fas fa-headset"></i>
                    <p><strong>Поддержка в чате</strong><br>Ответы на вопросы в течение 7 дней</p>
                </div>
                <div class="benefit">
                    <i class="fas fa-bolt"></i>
                    <p><strong>Быстрый старт</strong><br>Всё готово к использованию сразу после проверки платежа</p>
                </div>
            </div>
        </div>

        <!-- Кнопки действий -->
        <div class="payment-actions">
            <a href="index.html" class="btn btn-primary">
                <i class="fas fa-arrow-left"></i> Назад к тарифам
            </a>
            <a href="https://t.me/chearu-stack" target="_blank" class="btn btn-outline telegram-btn">
                <i class="fab fa-telegram"></i> Задать вопрос в Telegram
            </a>
        </div>
    </div>

    <footer class="main-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <i class="fas fa-balance-scale"></i>
                    <span>Адвокат Медного Гроша</span>
                </div>
                <p class="footer-tagline">Цифровой защитник прав потребителей. Досудебное урегулирование споров.</p>
                <div class="footer-links">
                    <a href="index.html">Главная</a>
                    <a href="#">Конфиденциальность</a>
                    <a href="#">Контакты</a>
                </div>
                <p class="footer-disclaimer">
                    <strong>Информационное примечание:</strong> Сервис предоставляет автоматизированную помощь. Не является юридической консультацией.
                </p>
            </div>
        </div>
    </footer>

    <!-- JavaScript для чтения параметров из URL -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // План по умолчанию, если ничего не передали
            const defaultPlan = {
                name: 'Расширенный пакет помощи',
                price: '1200',
                description: 'Расчёт неустойки + 3 шаблона документов + жалоба в Роспотребнадзор'
            };
            
            // Карта соответствия: plan из URL → красивое название и описание
            const planDetails = {
                'basic': {
                    name: 'Базовый пакет помощи',
                    description: 'Анализ ситуации + пошаговый план + 1 шаблон документа (претензия)'
                },
                'extended': {
                    name: 'Расширенный пакет помощи',
                    description: 'Расчёт неустойки + 3 шаблона документов + жалоба в Роспотребнадзор'
                },
                'subscription': {
                    name: 'Подписка на месяц',
                    description: 'Неограниченное число консультаций + все шаблоны + приоритетная поддержка'
                }
            };
            
            // Получаем параметры из URL
            const urlParams = new URLSearchParams(window.location.search);
            const planKey = urlParams.get('plan'); // "basic", "extended" или "subscription"
            const price = urlParams.get('price');  // "500", "1200" или "2500"
            
            // Определяем, какой план показывать
            let selectedPlan;
            if (planKey && planDetails[planKey] && price) {
                // Если параметры переданы правильно
                selectedPlan = {
                    ...planDetails[planKey],
                    price: price
                };
            } else {
                // Если кто-то зашёл напрямую без параметров
                selectedPlan = defaultPlan;
            }
            
            // Обновляем информацию на странице
            document.getElementById('selectedPlanName').textContent = selectedPlan.name;
            document.getElementById('selectedPlanPrice').textContent = selectedPlan.price + ' ₽';
            document.getElementById('selectedPlanDesc').textContent = selectedPlan.description;
            
            // БАЗОВАЯ ССЫЛКА ДЛЯ QR-КОДА (ЗАМЕНИ НА СВОЮ!)
            const baseQRUrl = 'https://www.sberbank.ru/ru/choise_bank?requisiteNumber=79108777700&bankCode=100000000111';
            
            // Обновляем QR-код с правильной суммой
            const qrCodeImage = document.getElementById('qrCodeImage');
            const newQRUrl = `${baseQRUrl}&sum=${selectedPlan.price}&label=plan_${planKey || 'extended'}`;
            qrCodeImage.src = `https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=${encodeURIComponent(newQRUrl)}`;
            qrCodeImage.alt = `QR-код для оплаты ${selectedPlan.price} рублей`;
            
            // Небольшая анимация для подтверждения
            const planDetailsElement = document.querySelector('.plan-details');
            planDetailsElement.style.opacity = '0';
            planDetailsElement.style.transform = 'translateY(10px)';
            
            setTimeout(() => {
                planDetailsElement.style.transition = 'opacity 0.5s, transform 0.5s';
                planDetailsElement.style.opacity = '1';
                planDetailsElement.style.transform = 'translateY(0)';
            }, 100);
        });
    </script>
    
    <script src="script.js"></script>
</body>
</html>
